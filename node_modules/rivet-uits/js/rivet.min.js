/*! Rivet - @version v0.5.0 */

Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this,n=this;if(!document.documentElement.contains(t))return null;do{if(n.matches(e))return n;n=n.parentElement}while(null!==n);return null});var Alert=function(){var e=function(){document.addEventListener("click",function(e){t(e)})},t=function(e){var t=e.target.closest(".rvt-alert__dismiss");if(t){var r=t.parentNode;n(r)}},n=function(e){e.parentNode.removeChild(e)};return{init:function(){e()},dismiss:n}}(),Drawer=function(){var e=null,t=null,n=null,r=null,o=null,i=function(e){var t="true"===e.getAttribute("aria-expanded")||!1;e.setAttribute("aria-expanded",!t)},a=function(e){var t="true"===e.getAttribute("aria-hidden")||!1;e.setAttribute("aria-hidden",!t)},u=function(e,t){e.setAttribute("aria-hidden","true"),t.setAttribute("aria-expanded","false"),t.classList.remove("is-open")},l=function(e,t,n){n&&(n.preventDefault(),n.stopPropagation()),i(e),a(t),e.classList.toggle("is-open")},c=function(){e.addEventListener("click",function(e){l(this,r,e)});for(var n=0;n<t.length;n++)t[n].addEventListener("click",function(e){l(this,document.querySelector("#"+this.getAttribute("data-subnav-toggle")),e)});o&&o.addEventListener("click",function(t){l(e,r,t)}),document.addEventListener("keyup",function(t){27==t.keyCode&&"true"!=r.getAttribute("aria-hidden")&&l(e,r,t)}),document.addEventListener("click",function(t){t.target==r||r.contains(t.target)||u(r,e)})};return{init:function(i){void 0===i&&(i=document),e=i.querySelector("[data-drawer-toggle]"),t=i.querySelectorAll("[data-subnav-toggle]"),n=e?e.getAttribute("data-drawer-toggle"):null,r=i.querySelector("#"+n),o=r?r.querySelector(".rvt-drawer__bottom-close"):null,e&&c()},toggle:l}}(),Dropdown=function(){var e={up:38,down:40,tab:9,escape:27},t=function(t,n){switch(n.keyCode){case e.escape:r(t.toggle,t.menu,n),t.toggle.focus();break;case e.down:n.preventDefault();for(a=0;a<t.focusables.length;a++)n.target==t.focusables[a]&&(i=a);var o=t.focusables[i+1];if(!o)return void t.firstFocusable.focus();o.focus();break;case e.up:n.preventDefault();for(var i,a=0;a<t.focusables.length;a++)n.target==t.focusables[a]&&(i=a);var u=t.focusables[i-1];if(!u)return void t.lastFocusable.focus();u.focus();break;case e.tab:document.activeElement!=t.lastFocusable||n.shiftKey||r(t.toggle,t.menu,null)}},n=function(e){var t={};return t.toggle=e,t.id=e.getAttribute("data-dropdown-toggle"),t.menu=document.querySelector("#"+t.id),t.focusables=t.menu.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),t.firstFocusable=t.focusables[0],t.lastFocusable=t.focusables[t.focusables.length-1],t},r=function(e,t,n){n&&(n.preventDefault(),n.stopPropagation(),n.clickWithinMenu=!0),a(t),o(e),i(t)},o=function(e){var t="true"===e.getAttribute("aria-expanded")||!1;e.setAttribute("aria-expanded",!t)},i=function(e){var t="true"===e.getAttribute("aria-hidden")||!1;e.setAttribute("aria-hidden",!t)},a=function(e){for(var t=document.querySelectorAll(".rvt-dropdown__menu, .dropdown__menu"),n=0;n<t.length;n++)if(e!=t[n]){t[n].setAttribute("aria-hidden","true");var r=t[n].getAttribute("id");document.querySelector('[data-dropdown-toggle="'+r+'"]').setAttribute("aria-expanded","false")}};return{init:function(o){void 0===o&&(o=document);var i=o.querySelectorAll("[data-dropdown-toggle]");if(i.length>0){for(var u=0;u<i.length;u++)i[u].addEventListener("click",function(e){var t=n(this);r(t.toggle,t.menu,e)}),i[u].addEventListener("keyup",function(t){var o=n(this);t.keyCode==e.down&&(t.preventDefault(),r(o.toggle,o.menu,t))}),i[u].addEventListener("keydown",function(t){var o=n(this);t.keyCode==e.down&&(t.preventDefault(),o.firstFocusable.focus()),t.keyCode==e.escape&&"false"==o.menu.getAttribute("aria-hidden")&&r(o.toggle,o.menu,t)});(i=Array.prototype.slice.call(i)).forEach(function(e){var r=n(e);r.menu.addEventListener("click",function(e){e.clickWithinMenu=!0}),r.menu.addEventListener("keydown",function(e){t(r,e)})}),document.addEventListener("click",function(e){e.clickWithinMenu||a(void 0)})}},closeAll:a,toggle:function(e){var t=document.querySelector('[data-dropdown-toggle="'+e+'"]'),n=document.getElementById(e);r(t,n)}}}(),Modal=function(){var e,t,n,r,o,i=null,a=null,u=function(){a.forEach(function(e){e.addEventListener("click",function(){var t=e.getAttribute("data-modal-trigger"),n=document.querySelector("#"+t);l(n)})})},l=function(i){e=i.getAttribute("data-modal-dialog");var a=i.querySelector(".rvt-modal__inner, .modal__inner"),u=i.querySelectorAll("[data-modal-close]");(u=Array.prototype.slice.call(u)).forEach(function(e){e.addEventListener("click",function(){d(i)})}),n=i.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=Array.prototype.slice.call(n),r=n[0],o=n[n.length-1],document.body&&document.body.classList.add("rvt-modal-open"),t=document.activeElement,i.removeAttribute("aria-hidden"),e||i.addEventListener("click",function(){d(this)}),a.addEventListener("click",function(e){e.stopPropagation()}),i.addEventListener("keydown",function(e){c(i,e)}),i.focus()},c=function(t,n){switch(n.keyCode){case 9:n.shiftKey?document.activeElement===r&&(n.preventDefault(),o.focus()):document.activeElement===o&&(n.preventDefault(),r.focus());break;case 27:e||d(t)}},d=function(e){document.body&&document.body.removeAttribute("class"),e.setAttribute("aria-hidden","true"),t&&t.focus()};return{init:function(e){void 0===e&&(e=document),i=document.querySelectorAll(".rvt-modal, .modal"),a=document.querySelectorAll("[data-modal-trigger]"),a=Array.prototype.slice.call(a),0!=i.length&&0!=a.length&&u()},open:l,close:d}}(),Tabs=function(){function e(){for(var e=0;e<d.length;e++)s[e]=d[e].querySelectorAll('[role="tablist"]')[0],f[e]=d[e].querySelectorAll('[role="tab"]'),v[e]=d[e].querySelectorAll('[role="tabpanel"]')}function t(e,t){a(e.target,t,!1)}function n(e,t){switch(e.keyCode){case g.end:e.preventDefault(),c(t);break;case g.home:e.preventDefault(),l(t);break;case g.up:case g.down:o(e,t)}}function r(e,t){switch(e.keyCode){case g.left:case g.right:o(e,t);break;case g.enter:case g.space:a(e.target,t)}}function o(e,t){var n=e.keyCode,r=!1;"vertical"==s[t].getAttribute("aria-orientation")?n!==g.up&&n!==g.down||(e.preventDefault(),r=!0):n!==g.left&&n!==g.right||(r=!0),r&&i(e,t)}function i(e,t){var n=e.keyCode;if(b[n]){var r=e.target;void 0!==r.index&&(f[t][r.index+b[n]]?f[t][r.index+b[n]].focus():n===g.left||n===g.up?c(t):n!==g.right&&n!=g.down||l(t))}}function a(e,t,n){n=n||!0,u(t),e.removeAttribute("tabindex"),e.setAttribute("aria-selected","true");var r=e.getAttribute("aria-controls");document.getElementById(r).removeAttribute("hidden"),n&&e.focus()}function u(e){for(var t=0;t<f[e].length;t++)f[e][t].setAttribute("tabindex","-1"),f[e][t].setAttribute("aria-selected","false");for(var n=0;n<v[e].length;n++)v[e][n].setAttribute("hidden","hidden")}function l(e){f[e][0].focus()}function c(e){f[e][f[e].length-1].focus()}var d=null,s=[],f=[],v=[],g={end:35,home:36,left:37,up:38,right:39,down:40,enter:13,space:32},b={37:-1,38:-1,39:1,40:1},p=function(e,o){for(var i=0;i<e.length;i++)e[i].addEventListener("click",function(e){t(e,o)}),e[i].addEventListener("keydown",function(e){n(e,o)}),e[i].addEventListener("keyup",function(e){r(e,o)}),e[i].index=i,e[i].tabsetIndex=o};return{init:function(t){if(void 0===t&&(t=document),d=t.querySelectorAll(".rvt-tabs"),e(),0!=d.length)for(var n=0;n<d.length;n++)p(f[n],n)},activateTab:a}}(),FileInput=function(){var e=function(e){for(var r=0;r<e.length;r++)e[r].addEventListener("change",function(){var e=this.getAttribute("data-upload"),r=this.querySelector("#"+e),o=this.querySelector("[data-file-preview]");r.files.length>0?(o.innerHTML="",r.files.length>1?o.appendChild(t(r)):o.appendChild(n(r))):o.innerHTML="No files selected"})},t=function(e){var t=document.createElement("span");return t.textContent=e.files.length+" files selected",t},n=function(e){var t=document.createElement("span");return t.textContent=e.files[0].name,t};return{init:function(t){void 0===t&&(t=document);var n=t.querySelectorAll("[data-upload]");n.length>0&&e(n)}}}();Alert.init(),Drawer.init(),Dropdown.init(),Modal.init(),Tabs.init(),FileInput.init();